<html lang="en" class="gr__localhost"><head>
    <meta charset="UTF-8">
    <title>Golden Shoe - Checkout</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <script type="text/javascript" async="" src="http://cdn.chatbot.com/widget/plugin.js"></script><script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script src="../js/utils.js"></script>
    <script type="text/javascript" src="../js/cart.js"></script>

    <link rel="stylesheet" href="../css/smoothproducts.css">

    <script src="https://www.gstatic.com/firebasejs/7.4.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.4.0/firebase-analytics.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.3.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.4.0/firebase-firestore.js"></script>

    <style>
        .center-img {
            display: block;
            margin-left: auto;
            margin-right: auto;
            width: 70%;
        }

        /* Container holding the image and the text */
        .img-container {
            position: relative;
            text-align: center;
            color: white;
        }

        /* Centered text */
        .img-centered {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .cat:hover {
            color: white;
        }

        .cat {
            font-size: xx-large;
            color: #80bdff;
            border-color: #1b1e21;
            background-color: transparent;
            border-color: transparent;
        }
    </style>

    <script>
        // Your web app's Firebase configuration
        var firebaseConfig = {
            apiKey: "AIzaSyCC3nwywBKocMpJK04N2wub2U5IYcj7OJs",
            authDomain: "goldenshoe-1daa8.firebaseapp.com",
            databaseURL: "https://goldenshoe-1daa8.firebaseio.com",
            projectId: "goldenshoe-1daa8",
            storageBucket: "goldenshoe-1daa8.appspot.com",
            messagingSenderId: "964528167562",
            appId: "1:964528167562:web:d0fec48256e2a7817b6b73",
            measurementId: "G-PF49M0F1TV"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        createCart();
        var db = firebase.firestore();
        var itemSelected = "";
        var discount = 0;
    </script><script src="https://www.googletagmanager.com/gtag/js?l=dataLayer" async=""></script>
    <script type="text/javascript" src="https://cdn.chatbot.com/widget/polyfill.js"></script><style id="chatbot-stylesheet" type="text/css">html.chatbot-mobile-opened > body {
    position: fixed;
    width: 100%;
    height: 100%;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    overflow-y: hidden;
}
</style></head>
<body data-gr-c-s-loaded="true">
<nav class="navbar navbar-dark navbar-expand-md bg-faded justify-content-center" style="background-color: #333">
    <a href="../index.html" class="navbar-brand d-flex w-50 mr-auto font-weight-bolder" style="font-size: x-large">Golden Shoe</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsingNavbar">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="navbar-collapse collapse w-100" id="collapsingNavbar">
        <ul class="navbar-nav w-100 justify-content-center">
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle font-weight-bold" href="#" id="navbardropm" data-toggle="dropdown" style="font-size: large">
                    Men
                </a>
                <div class="dropdown-menu" style="font-size: large">
                    <a class="dropdown-item" href="../pages/products.html?group=men&amp;cat=all">View All</a>
                    <a class="dropdown-item" href="../pages/products.html?group=men&amp;cat=boots">Boots</a>
                    <a class="dropdown-item" href="../pages/products.html?group=men&amp;cat=trainers">Trainers</a>
                    <a class="dropdown-item" href="../pages/products.html?group=men&amp;cat=smart">Smart Shoes</a>
                    <a class="dropdown-item" href="../pages/products.html?group=men&amp;cat=shoes">Shoes</a>
                </div>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle font-weight-bold" href="#" id="navbardropw" data-toggle="dropdown" style="font-size: large">
                    Women
                </a>
                <div class="dropdown-menu" style="font-size: large">
                    <a class="dropdown-item" href="../pages/products.html?group=women&amp;cat=all">View All</a>
                    <a class="dropdown-item" href="../pages/products.html?group=women&amp;cat=boots">Boots</a>
                    <a class="dropdown-item" href="../pages/products.html?group=women&amp;cat=trainers">Trainers</a>
                    <a class="dropdown-item" href="../pages/products.html?group=women&amp;cat=heels">Heels</a>
                    <a class="dropdown-item" href="../pages/products.html?group=women&amp;cat=shoes">Shoes</a>
                </div>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle font-weight-bold" href="#" id="navbardropk" data-toggle="dropdown" style="font-size: large">
                    Kids
                </a>
                <div class="dropdown-menu" style="font-size: large">
                    <a class="dropdown-item" href="../pages/products.html?group=kids&amp;cat=all">View All</a>
                    <a class="dropdown-item" href="../pages/products.html?group=kids&amp;cat=crib">Crib</a>
                    <a class="dropdown-item" href="../pages/products.html?group=kids&amp;cat=infant">Infant</a>
                    <a class="dropdown-item" href="../pages/products.html?group=kids&amp;cat=kids">Kids</a>
                </div>
            </li>
        </ul>
        <ul class="nav navbar-nav ml-auto w-100 justify-content-end">
            <li class="nav-item hidden-md hidden-sm">
                <a class="nav-link" href="#"><img src="../images/user.png" alt="Account" height="30" width="30"></a>
            </li>
            <li class="nav-item hidden-md hidden-sm">
                <a class="nav-link" href="#">
                    <div class="img-container">
                        <img src="../images/bag.png" alt="Cart" height="30" width="30">
                        <div class="img-centered font-weight-bolder" id="amount" style="margin-top: 22%">1</div>
                    </div>
                </a>
            </li>
        </ul>
    </div>
</nav>

<div class="container-fluid">
    <br>
    <h1 style="text-align: center">Checkout</h1>
    <br>
    <div class="text-center">
        <button type="button" class="btn btn-secondary" onclick="remove()">Remove Selected Item</button>
    </div>
    <br>
    <div class="list-group" id="checkout">

        <a href="javascript:void(0);" onclick="selected('Demi Beat');" class="list-group-item list-group-item-action flex-column align-items-start"> <div class="d-flex w-100 justify-content-between"><h5 class="mb-1" style="font-size: xx-large">Demi Beat</h5><small style="font-size: x-large">x4</small></div><p class="mb-1" style="font-size: large ">Price: £89.00.</p> <small style="font-size: medium">Colour: Leopard Print Pony</small><br><small style="font-size: medium">Size: 4</small></a></div>
    <br>
    <form class="form-inline justify-content-center" onsubmit="applyCoupon()">
        <input type="text" class="form-control" id="couponCode" placeholder="Enter Coupon Code">
        <button type="submit" class="btn btn-secondary">Submit</button>
    </form>
    <br>
    <h3 class="text-center" id="total">Total: £356.00</h3>
    <br>
</div>

<div class="jumbotron text-center" style="margin-bottom:0">
    <div class="row text-center">
        <a class="btn btn-default" href="#">About Us</a>
        <a class="btn btn-default" href="#">FAQ</a>
        <a class="btn btn-default" href="#">Customer Services</a>
        <a class="btn btn-default" href="#">Returns and Refunds</a>
        <a class="btn btn-default" href="#">Delivery</a>
    </div>
</div>

<script>
    displayCart();
    document.getElementById('amount').innerHTML = JSON.parse(sessionStorage.getItem( 'cart' )).items.length;
    if (discount != 0) {
        document.getElementById('total').innerHTML = "Total: £"+sessionStorage.getItem("total") / (discount/100)+".00";
    } else {
        document.getElementById('total').innerHTML = "Total: £"+sessionStorage.getItem("total")+".00";
    }


    function selected(item) {
        itemSelected = item;
        console.log(item)
    }

    function applyCoupon() {
        var code = document.getElementById("couponCode").value;
        console.log("Error getting documents: ");
        db.collection("coupon").where("code", "==", code).get()
            .then(function(querySnapshot) {
                querySnapshot.forEach(function(doc) {
                    console.log(doc.id, " => ", doc.data());
                    discount = doc.data().value;
                });
            })
            .catch(function(error) {
                console.log("Error getting documents: ", error);
                discount = discount;
            });
        if (discount > 0) alert("Discount of "+discount+"% applied!")
    }

    function remove() {
        removeFromCart(itemSelected);
        document.getElementById('checkout').innerHTML = "";
        displayCart()
        document.getElementById('amount').innerHTML = JSON.parse(sessionStorage.getItem( 'cart' )).items.length;
        if (discount != 0) {
            document.getElementById('total').innerHTML = "Total: £"+sessionStorage.getItem("total") / (discount/100)+".00";
        } else {
            document.getElementById('total').innerHTML = "Total: £"+sessionStorage.getItem("total")+".00";
        }
    }
</script>

<!-- Start of ChatBot code -->
<script type="text/javascript">
    window.__be = window.__be || {};
    window.__be.id = "5dd2b459c1c82e00078f00f7";
    (function() {
        var be = document.createElement('script'); be.type = 'text/javascript'; be.async = true;
        be.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'cdn.chatbot.com/widget/plugin.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(be, s);
    })();
</script>
<!-- End of ChatBot code -->




<div id="chatbot-chat" style="background-color: transparent; pointer-events: none; z-index: 2147483639; max-height: 100%; position: fixed; right: 0px; bottom: 0px; border: 0px; width: 100px; height: 100px; max-width: 100%; overflow: hidden; opacity: 1;"><iframe src="https://cdn.chatbot.com/widget/chat.html?id=5dd2b459c1c82e00078f00f7&amp;branding=true&amp;v=504" id="chatbot-chat-frame" style="pointer-events: all; background: none; border: 0px; float: none; position: absolute; top: 0px; right: 0px; bottom: 0px; left: 0px; width: 100%; height: 100%; margin: 0px; padding: 0px;"></iframe></div></body></html>